# Инструкция по GIT

![GIT](https://miro.medium.com/max/1200/1*PqEPOjr7MGG1bYwYYlN5sw.png)

[Подробная информация](https://github.com/cyberspacedk/Git-commands?ysclid=l6rqxivyan102664450)

Git — система контроля версий (файлов). Что-то вроде возможности сохраняться в компьютерных играх (в Git эквивалент игрового сохранения — коммит). Важно: добавление файлов к «сохранению» двухступенчатое: сначала добавляем файл в индекс (git add), потом «сохраняем» (git commit).

## Ключ к пониманию 

Ключ к пониманию концепции git — знание о «трех деревьях»:

Рабочая директория — файловая система проекта (те файлы, с которыми вы работаете).
Индекс — список отслеживаемых git-ом файлов и директорий, промежуточное хранилище изменений (редактирование, удаление отслеживаемых файлов).
Директория .git/ — все данные контроля версий этого проекта (вся история разработки: коммиты, ветки, теги и пр.).

## Настройки

Перед началом работы нужно выполнить некоторые настройки:

- git config --global user.name "Your Name" # указать имя

git config --global user.email "e@w.com"  # указать электропочту

## Vim (некоторые команды)
ESC     — переход в командный режим
i       — переход в режим редактирования текста
ZQ (зажат Shift, поочередное нажатие) — выход без сохранения
ZZ (зажат Shift, поочередное нажатие) — сохранить и выйти

## Консольные команды
git init - создать новый проект в текущей директории

git init folder-name - создать новый проект в указанной директории

## Просмотр изменений

git status - показать состояние репозитория (отслеживаемые, изменённые, новые файлы и пр.)

git diff - сравнить рабочую директорию и индекс (неотслеживаемые файлы ИГНОРИРУЮТСЯ)

## Добавление изменений в индекс
git add . - добавить в индекс все новые, изменённые, удалённые файлы из текущей директории и её поддиректорий

git add text.txt - добавить в индекс указанный файл (был изменён, был удалён или это новый файл)


## Удаление изменений в индекс

git reset - убрать из индекса все добавленные в него изменения (в рабочей директории все изменения сохранятся), антипод git add

git reset readme.txt - убрать из индекса изменения указанного файла (в рабочей директории изменения сохранятся)

## Отмена изменений 

git checkout text.txt - ОПАСНО: отменить изменения в файле, вернуть состояние файла, имеющееся в индексе

git reset --hard - ОПАСНО: отменить изменения; вернуть то, что в коммите, на который указывает HEAD (незакомиченные изменения удалены из индекса и из рабочей директории, неотслеживаемые файлы останутся на месте)

## Коммиты
git commit -m "Name of commit" - зафиксировать в коммите проиндексированные изменения (закоммитить), добавить сообщение

git commit -am "Name of commit" - проиндексировать отслеживаемые файлы (ТОЛЬКО отслеживаемые, но НЕ новые файлы) и закоммитить, добавить сообщение

##  Временно переключиться на другой коммит

git checkout b9533bb - переключиться на коммит с указанным хешем (переместить HEAD на указанный коммит, рабочую директорию вернуть к состоянию, на момент этого коммита)

git checkout master - переключиться на коммит, на который указывает master (переместить HEAD на коммит, на который указывает master, рабочую директорию вернуть к состоянию на момент этого коммита)

## Переключиться на другой коммит и продолжить работу с него

git checkout -b new-branch 5589877 - создать ветку new-branch, начинающуюся с коммита c хешем 5589877 (переместить HEAD на указанный коммит, рабочую директорию вернуть к состоянию, на момент этого коммита, создать указатель на этот коммит (ветку) с указанным именем)

## Востановление изменений 

git checkout 5589877 index.html - восстановить в рабочей директории указанный файл на момент указанного коммита (и добавить это изменение в индекс) (git reset index.html для удаления из индекса, но сохранения изменений в файле)

## Удаление файла

git rm text.txt - удалить отслеживаемый неизменённый файл и проиндексировать это изменение

...

## История коммитов
git log master             # показать коммиты в указанной ветке

git log -2                 # показать последние 2 коммита в активной ветке
git log -2 --stat          # показать последние 2 коммита и статистику внесенных ими изменений
git log -p -22             # показать последние 22 коммита и внесенную ими разницу на уровне строк
git log --graph -10        # показать последние 10 коммитов с ASCII-представлением ветвления

## Кто написал строку
git blame README.md --date=short -L 5,8 # показать строки 5-8 указанного файла и коммиты, в которых строки были добавлены

## История изменений
git reflog -20             # показать последние 20 изменений положения указателя HEAD


## Ветки

git branch                 # показать список веток
git branch -v              # показать список веток и последний коммит в каждой

## Конфликт слияния

git merge feature                # влить в активную ветку изменения из ветки feature
git merge-base master feature    # показать хеш последнего общего коммита для двух указанных веток

## И другое

Цитата дня:

>Чудеса - там, где в них верят, и чем больше верят, тем чаще они случаются!

## Pull request

Сделать это очень просто: на странице репозитория имеется кнопочка «Fork», которую и следует нажать.

После чего, эту свою копию уже можно «стянуть» на свой компьютер:

git clone git@github.com:username/Spoon-Knife.git

Склонированный репозиторий имеет одну привязку к удалённому репозиторию, названную origin, которая указывает на вашу копию на GitHub, а не на оригинальный репозиторий, чтобы отслеживать изменения и в нём, вам нужно будет добавить другую привязку, названную, например, upstream.

cd Spoon-Knife
git remote add upstream git://github.com/octocat/Spoon-Knife.git
git fetch upstream

Итак, в этой точке мы уже можем править код и делать коммиты. Если вы сделали все предыдущие шаги, чтобы потом вернуть ваши изменения в оригинальный репозиторий, то я настоятельно советую делать всю работу в отдельной тематической ветви разработки. Полезность этого станет ясна на этапе посылки pull request'а. Пускай она будет называться feature.

git checkout -b feature #Создаёт новую ветвь, названную "feature" и делает её активной

Вот, теперь творите добро (и пусть оно будет выражаться в коммитах).

Как только вы сделали работу (или её часть), отправьте её в свою копию репозитория на GitHub:

git push origin feature #Загружает изменения в текущей ветви в origin в ветвь feature

Возвращаем изменения: Pull request

Идите на страницу вашей копии репозитория на GitHub, выбирайте ветвь feature и жмите кнопку Pull Request.

Добавили данные для новой ветки

